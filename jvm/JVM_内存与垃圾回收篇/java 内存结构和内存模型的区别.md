### java内存结构(JVM)

**java内存结构是解决java中的数据如何存放的问题。**

jvm：java内存结构

堆、方法区、虚拟机栈、本地方法栈、程序计数器





### java 内存模型(JMM)

**java内存模型是解决java中多个线程共享数据的问题**



![](images\image-20200704210429536.png)



从这张图我们分析一下java内存模型是如何解决上面的三个问题的。

一：所有的数据都在主内存中。

二：每个线程都保留一份共享变量的副本。线程对变量的所有操作都必须在这个副本内存中进行，而不能直接读写主内存。

三：不同的线程之间也无法直接访问对方工作内存中的变量，线程间变量的传递均需要自己的工作内存和主存之间进行数据同步进行。



java 关键字volatile可以保证当主线程中的值刷新了之后会立马通知到子线程



synchronized 每次读都从主内存的，锁释放后都从本地内存写入主内存













